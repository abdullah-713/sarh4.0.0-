# 10. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙÙŠØ² ÙˆØ§Ù„Ù…Ù†Ø§ÙØ³Ø©

## 10.1 Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ÙŠØ¹ØªÙ…Ø¯ Ø³Ù‡Ø± Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… ØªØ­ÙÙŠØ² Ù…ØªÙƒØ§Ù…Ù„ ÙŠØ´Ù…Ù„: **Ø§Ù„Ø´Ø§Ø±Ø§Øª**ØŒ **Ø§Ù„Ù†Ù‚Ø§Ø·**ØŒ **Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±**ØŒ Ùˆ**Ù„ÙˆØ­Ø© Ù…Ù†Ø§ÙØ³Ø© Ø§Ù„ÙØ±ÙˆØ¹**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙÙŠØ²                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ø§Ù„Ø´Ø§Ø±Ø§Øª        â”‚  Ø§Ù„Ù†Ù‚Ø§Ø·         â”‚  Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©               â”‚
â”‚  (Badges)       â”‚  (Points)       â”‚  (Competition)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ù…Ø¹Ø§ÙŠÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ©  â”‚ ÙƒØ³Ø¨/Ø®ØµÙ…/Ù…ÙƒØ§ÙØ£Ø© â”‚ ØªØ±ØªÙŠØ¨ Ø§Ù„ÙØ±ÙˆØ¹           â”‚
â”‚ Ù…Ù†Ø­ ÙŠØ¯ÙˆÙŠ       â”‚ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø³Ø¬Ù„Ø©   â”‚ Ù…Ø³ØªÙˆÙŠØ§Øª ØªÙ†Ø§ÙØ³ÙŠØ©        â”‚
â”‚ Ø­Ø¯Ø« BadgeAwardedâ”‚ source morphTo  â”‚ BranchLeaderboardPage   â”‚
â”‚ Ø¥Ø´Ø¹Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ   â”‚ PerformanceAlertâ”‚ ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10.2 Ø§Ù„Ø´Ø§Ø±Ø§Øª (Badges)

### Ø¨Ù†ÙŠØ© Ø§Ù„Ø´Ø§Ø±Ø©

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„ÙˆØµÙ |
|-------|-------|
| `name_ar` / `name_en` | Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø© |
| `description_ar` / `description_en` | ÙˆØµÙ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø­ØµÙˆÙ„ |
| `icon` | Ø£ÙŠÙ‚ÙˆÙ†Ø© |
| `color` | Ø§Ù„Ù„ÙˆÙ† |
| `points` | Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù…Ù†ÙˆØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ |
| `criteria_type` | Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹ÙŠØ§Ø± (Ø­Ø¶ÙˆØ± Ù…ØªØªØ§Ù„ÙŠØŒ Ø£Ø¯Ø§Ø¡ØŒ ÙŠØ¯ÙˆÙŠ...) |
| `criteria_value` | Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¹ÙŠØ§Ø± (Ù…Ø«Ù„Ø§Ù‹: 30 ÙŠÙˆÙ… Ù…ØªØªØ§Ù„ÙŠ) |

### Ù…Ù†Ø­ Ø§Ù„Ø´Ø§Ø±Ø§Øª

```php
UserBadge::award($userId, $badgeSlug, $context);
// 1. ÙŠÙÙ†Ø´Ø¦ Ø³Ø¬Ù„ user_badges
// 2. ÙŠÙØ·Ù„Ù‚ Ø­Ø¯Ø« BadgeAwarded
// 3. â†’ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ HandleBadgePoints ÙŠÙÙ†Ø´Ø¦ PerformanceAlert (Ø¥Ø´Ø¹Ø§Ø± ØªÙ‡Ù†Ø¦Ø©)
```

### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±

| Ø§Ù„Ù…Ø¹ÙŠØ§Ø± | Ø§Ù„Ù…Ø«Ø§Ù„ |
|---------|--------|
| Ø³Ù„Ø³Ù„Ø© Ø­Ø¶ÙˆØ± | Ø­Ø¶ÙˆØ± 30 ÙŠÙˆÙ… Ù…ØªØªØ§Ù„ÙŠ Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ± |
| Ø¹Ø¯Ø¯ Ø­Ø¶ÙˆØ± | 100 ÙŠÙˆÙ… Ø­Ø¶ÙˆØ± Ø¥Ø¬Ù…Ø§Ù„ÙŠ |
| Ø£Ø¯Ø§Ø¡ | Ø¯Ø±Ø¬Ø© ÙƒÙØ§Ø¡Ø© > 90 Ù„Ù…Ø¯Ø© Ø´Ù‡Ø± |
| ÙŠØ¯ÙˆÙŠ | ÙŠÙ…Ù†Ø­Ù‡Ø§ Ø§Ù„Ù…Ø¯ÙŠØ± Ù…Ø¨Ø§Ø´Ø±Ø© |

---

## 10.3 Ø§Ù„Ù†Ù‚Ø§Ø· (Points)

### Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· (PointsTransaction)

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„ÙˆØµÙ |
|-------|-------|
| `user_id` | Ø§Ù„Ù…ÙˆØ¸Ù |
| `points` | Ø§Ù„Ù†Ù‚Ø§Ø· (Ù…ÙˆØ¬Ø¨ = ÙƒØ³Ø¨ØŒ Ø³Ø§Ù„Ø¨ = Ø®ØµÙ…) |
| `type` | Ø§Ù„Ù†ÙˆØ¹: `earned` / `deducted` / `bonus` / `manual` |
| `source_type` / `source_id` | Ø§Ù„Ù…ØµØ¯Ø± (MorphTo â€” Ø´Ø§Ø±Ø©ØŒ Ø­Ø¶ÙˆØ±ØŒ ØªØ¹Ø¯ÙŠÙ„...) |
| `description` | ÙˆØµÙ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© |

### Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù†Ù‚Ø§Ø·

| Ø§Ù„Ù…ØµØ¯Ø± | Ø§Ù„Ù†Ù‚Ø§Ø· | Ø§Ù„Ø´Ø±Ø· |
|--------|--------|-------|
| Ø´Ø§Ø±Ø© Ù…ÙƒØªØ³Ø¨Ø© | Ø­Ø³Ø¨ Ø§Ù„Ø´Ø§Ø±Ø© | Ø¹Ù†Ø¯ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ø§Ø±Ø© |
| Ø­Ø¶ÙˆØ± ÙÙŠ Ø§Ù„ÙˆÙ‚Øª | +1 | ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ± |
| Ø³Ù„Ø³Ù„Ø© Ø­Ø¶ÙˆØ± | +5 | ÙƒÙ„ 7 Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ© |
| ØªØ¹Ø¯ÙŠÙ„ ÙŠØ¯ÙˆÙŠ | Â±N | Ø¹Ø¨Ø± UserResource â†’ adjust_points |
| ØªØ¹Ø¯ÙŠÙ„ ØªÙ‚ÙŠÙŠÙ… | Â±N | Ø¹Ø¨Ø± ScoreAdjustmentResource |

### Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‚Ø§Ø·

```php
$user->total_points  // Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…Ø­Ø¯Ù‘Ø« ÙÙŠ Ø¬Ø¯ÙˆÙ„ users)
```

---

## 10.4 Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ø­Ø¶ÙˆØ± (Streaks)

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„ÙˆØµÙ |
|-------|-------|
| `current_streak` | Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© (Ø¨Ø¯ÙˆÙ† ØºÙŠØ§Ø¨/ØªØ£Ø®ÙŠØ±) |
| `longest_streak` | Ø£Ø·ÙˆÙ„ Ø³Ù„Ø³Ù„Ø© Ø­Ø¶ÙˆØ± ÙˆØµÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ø§Ù„Ù…ÙˆØ¸Ù |

- **ØªØªØ²Ø§ÙŠØ¯**: ÙƒÙ„ ÙŠÙˆÙ… Ø­Ø¶ÙˆØ± `present` Ø¨Ø¯ÙˆÙ† ØªØ£Ø®ÙŠØ±
- **ØªÙØµÙÙŽÙ‘Ø±**: Ø¹Ù†Ø¯ Ø£ÙŠ ØºÙŠØ§Ø¨ Ø£Ùˆ ØªØ£Ø®ÙŠØ±
- **ØªÙØ­Ø¯ÙŽÙ‘Ø«**: `longest_streak` ÙŠÙØ­Ø¯ÙŽÙ‘Ø« Ø¥Ø°Ø§ `current > longest`

---

## 10.5 Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ø¨ÙŠÙ† Ø§Ù„ÙØ±ÙˆØ¹ (BranchLeaderboardPage)

### Ø¢Ù„ÙŠØ© Ø§Ù„ØªØ±ØªÙŠØ¨

```
ØªØ±ØªÙŠØ¨ Ø§Ù„ÙØ±ÙˆØ¹ = Ø§Ù„Ø£Ù‚Ù„ Ø®Ø³Ø§Ø±Ø© Ù…Ø§Ù„ÙŠØ© Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©
```

Ù„ÙƒÙ„ ÙØ±Ø¹:
- Ù…Ø¬Ù…ÙˆØ¹ `cost_per_minute Ã— delay_minutes` Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
- ÙŠØ­Ø³Ø¨ **Ù„ÙƒÙ„ Ù…ÙˆØ¸Ù** Ù„Ø£Ù† Ø­Ø¬Ù… Ø§Ù„ÙØ±ÙˆØ¹ Ù…Ø®ØªÙ„Ù

### Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

| Ø§Ù„Ù…Ø³ØªÙˆÙ‰ | Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© | Ø§Ù„Ø´Ø±Ø· |
|---------|----------|-------|
| Ø£Ø³Ø·ÙˆØ±ÙŠ (Legendary) | ðŸ‘‘ | Ø®Ø³Ø§Ø±Ø© = 0 |
| Ø£Ù„Ù…Ø§Ø³ÙŠ (Diamond) | ðŸ’Ž | Ø£Ù‚Ù„ Ù…Ù† 2% Ù…Ù† Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© |
| Ø°Ù‡Ø¨ÙŠ (Gold) | ðŸ¥‡ | Ø£Ù‚Ù„ Ù…Ù† 5% |
| ÙØ¶ÙŠ (Silver) | ðŸ¥ˆ | Ø£Ù‚Ù„ Ù…Ù† 10% |
| Ø¨Ø±ÙˆÙ†Ø²ÙŠ (Bronze) | ðŸ¥‰ | Ø£Ù‚Ù„ Ù…Ù† 15% |
| Ù…Ø¨ØªØ¯Ø¦ (Starter) | ðŸŒ± | Ø£ÙƒØ«Ø± Ù…Ù† 15% |

### Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø±Ø¶

- ðŸ† Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ø£Ù‚Ù„ Ø®Ø³Ø§Ø±Ø©)
- ðŸ¢ Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø£Ø®ÙŠØ± (Ø§Ù„Ø£ÙƒØ«Ø± Ø®Ø³Ø§Ø±Ø©)
- Ø§Ù„ØªØ­Ø¯ÙŠØ«: ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù…Ø¹ ÙƒÙ„ Ø²ÙŠØ§Ø±Ø© Ù„Ù„ØµÙØ­Ø©

---

## 10.6 Ù…ÙƒÙˆÙ†Ø§Øª Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸Ù

### GamificationWidget â€” Ø£Ø¯Ø§Ø© Ø§Ù„ØªØ­ÙÙŠØ²

| Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø· | Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠ |
| Ø§Ù„Ø´Ø§Ø±Ø§Øª | Ø§Ù„Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø© Ù…Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø§ØªÙ‡Ø§ |
| Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© | Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªØªØ§Ù„ÙŠ |
| Ø§Ù„ØªØ±ØªÙŠØ¨ | ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ ÙØ±Ø¹Ù‡ |

### CompetitionWidget â€” Ø£Ø¯Ø§Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø©

| Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| Ø§Ù„Ù…Ù†Ø§ÙØ³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© | Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ© |
| ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙˆØ¸Ù | Ù…ÙˆÙ‚Ø¹Ù‡ ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ |
| ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© | Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© |
| Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© | Ù…Ø´Ø§Ø±Ùƒ/ØºÙŠØ± Ù…Ø´Ø§Ø±Ùƒ |

### BranchProgressWidget â€” Ø£Ø¯Ø§Ø© ØªÙ‚Ø¯Ù… Ø§Ù„ÙØ±Ø¹

| Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ± | Ù…Ø¹Ø¯Ù„ Ø­Ø¶ÙˆØ± Ø§Ù„ÙØ±Ø¹ |
| ØªØªØ¨Ø¹ Ø§Ù„Ø®Ø³Ø§Ø¦Ø± | Ø§Ù„Ø®Ø³Ø§Ø¦Ø± Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø© |
| Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒÙØ§Ø¡Ø© | Ù…Ø¤Ø´Ø± ÙƒÙØ§Ø¡Ø© Ø§Ù„ÙØ±Ø¹ |
| ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ø§Ù„ÙØ±Ø¹ | Ù…Ù† `AnalyticsService::getPersonalMirror()` |

---

## 10.7 ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (ScoreAdjustment)

ØªØ¹Ø¯ÙŠÙ„Ø§Øª ÙŠØ¯ÙˆÙŠØ© Ù„Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø§Ù„ÙŠØ©:

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„ÙˆØµÙ |
|-------|-------|
| `scope` | Ø§Ù„Ù†Ø·Ø§Ù‚: ÙØ±Ø¹ / Ù…ÙˆØ¸Ù / Ù‚Ø³Ù… |
| `points_delta` | ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· (Â±) |
| `value_delta` | ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© (Â± Ø±.Ø³) |
| `category` | ÙŠØ¯ÙˆÙŠ / Ù…ÙƒØ§ÙØ£Ø© / Ø¹Ù‚ÙˆØ¨Ø© / ØªØµØ­ÙŠØ­ |
| `reason` | Ø§Ù„Ø³Ø¨Ø¨ |

---

> **Ø§Ù„Ø³Ø§Ø¨Ù‚**: [Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ§ØµÙ„](09-communication-system.md) | **Ø§Ù„ØªØ§Ù„ÙŠ**: [Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚](11-management-system.md)

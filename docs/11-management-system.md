# 11. ูุธุงู ุงูุฅุฏุงุฑุฉ ูุงูุชุฏููู

## 11.1 ูุธุฑุฉ ุนุงูุฉ

ูููุฑ ุณูุฑ ุฃุฏูุงุช ูุชุชุจุน ุงูุนูููุงุช ุงูุญุณุงุณุฉุ ุฅุฏุงุฑุฉ ุงููุซุงุฆูุ ูุงูุชูุจููุงุช ุงูุงุณุชุจุงููุฉ.

---

## 11.2 ุณุฌู ุงูุชุฏููู (AuditLog)

### ุงูุจููุฉ

| ุงูุญูู | ุงููุตู |
|-------|-------|
| `user_id` | ุงููุณุชุฎุฏู ุงูุฐู ูููุฐ ุงูุนูููุฉ |
| `action` | ุงูุนูููุฉ (check_in, check_out, vault_access, trap_triggered...) |
| `auditable_type` | ููุน ุงููููุฐุฌ ุงููุชุฃุซุฑ (MorphTo) |
| `auditable_id` | ูุนุฑู ุงูุณุฌู ุงููุชุฃุซุฑ |
| `old_values` | JSON โ ุงูููู ุงููุฏููุฉ |
| `new_values` | JSON โ ุงูููู ุงูุฌุฏูุฏุฉ |
| `ip_address` | ุนููุงู IP |
| `user_agent` | ูุนูููุงุช ุงููุชุตูุญ/ุงูุฌูุงุฒ |

### ุงูุนูููุงุช ุงููุณุฌูุฉ ุชููุงุฆููุง

| ุงูุนูููุฉ | ุงููุตุฏุฑ |
|---------|--------|
| ุชุณุฌูู ุญุถูุฑ | `HandleAttendanceRecorded` Listener |
| ูุชุญ ุงูุฎุฒูุฉ ุงูุณุฑูุฉ | `WhistleblowerVaultPage` |
| ุชูุงุนู ูุน ูุฎ | `TrapResponseService` |
| ุชุตุนูุฏ ูุฎ | `HandleTrapTriggered` Listener |

---

## 11.3 ูุซุงุฆู ุงูููุธููู (EmployeeDocument)

### ุฃููุงุน ุงููุซุงุฆู

| ุงูููุน | ุงููุตู |
|-------|-------|
| `passport` | ุฌูุงุฒ ุณูุฑ |
| `residence` | ุฅูุงูุฉ |
| `contract` | ุนูุฏ ุนูู |
| `certificate` | ุดูุงุฏุฉ |
| `license` | ุฑุฎุตุฉ |
| `id_card` | ุจุทุงูุฉ ูููุฉ |
| `medical` | ุชูุฑูุฑ/ุดูุงุฏุฉ ุทุจูุฉ |
| `insurance` | ุชุฃููู |
| `other` | ุฃุฎุฑู |

### ุชุชุจุน ุงูุงูุชูุงุก

- **`expiry_date`**: ุชุงุฑูุฎ ุงูุชูุงุก ุงููุซููุฉ
- **`days_until_expiry`**: ุฎุงุตูุฉ ูุญุณูุจุฉ โ ุฃูุงู ูุชุจููุฉ
- **ุฃููุงู ูู ุงููุงุฌูุฉ**:
  - ๐ด ุฃุญูุฑ: ููุชููุฉ ุฃู ุชูุชูู ุฎูุงู 7 ุฃูุงู
  - ๐ก ุฃุตูุฑ: ุชูุชูู ุฎูุงู 30 ููู
  - ๐ข ุฃุฎุถุฑ: ุฃูุซุฑ ูู 30 ููู

### ูุทุงู ุงููุตูู

| ุงููุณุชูู | ุงููุทุงู |
|---------|--------|
| 10+ | ุฌููุน ูุซุงุฆู ุฌููุน ุงูููุธููู |
| 6-9 | ูุซุงุฆู ููุธูู ูุฑุนู |
| 1-5 | ูุซุงุฆูู ุงูุดุฎุตูุฉ ููุท |

---

## 11.4 ุชุฐููุฑุงุช ุงูููุธููู (EmployeeReminder)

### ุงูุจููุฉ

| ุงูุญูู | ุงููุตู |
|-------|-------|
| `user_id` | ุงูููุธู ุงููุนูู |
| `reminder_key` | ููุน ุงูุชุฐููุฑ |
| `reminder_date` | ุชุงุฑูุฎ ุงูุชุฐููุฑ |
| `notes` | ููุงุญุธุงุช ุฅุถุงููุฉ |
| `is_completed` | ุชู ุงูุฅูุฌุงุฒุ |

### ุชุตููู ุงูุงุณุชุนุฌุงู

| ุงูุญุงูุฉ | ุงูุดุฑุท | ุงูููู |
|--------|-------|-------|
| ูุชุฃุฎุฑ (overdue) | ุงูุชุงุฑูุฎ ูุถู | ๐ด ุฃุญูุฑ ูุงุจุถุฉ |
| ุนุงุฌู (urgent) | ุฎูุงู 7 ุฃูุงู | ๐ ุจุฑุชูุงูู |
| ูุงุฏู (upcoming) | ุฃูุซุฑ ูู 7 ุฃูุงู | ๐ข ุฃุฎุถุฑ |
| ููุชูู (completed) | `is_completed = true` | โ |

### ุตูุญุฉ ุฌููุน ุงูุชุฐููุฑุงุช (AllRemindersPage)

- **ุงููุตูู**: ุงููุณุชูู 10
- ุชุฑุชูุจ: ุงููุชุฃุฎุฑ ุฃููุงู โ ุงูุนุงุฌู โ ุงููุงุฏู
- **ุดุงุฑุฉ ุงูุชููู**: ุนุฏุฏ (ุงูุนุงุฌู + ุงููุชุฃุฎุฑ)

### ุฃุฏุงุฉ ุงูุชูููู (RemindersCalendarWidget)

- **ุงููุตูู**: ุงููุณุชูู 6+
- ุชุนุฑุถ ุงูุชุฐููุฑุงุช ุงูุชู ุชูุชูู ุฎูุงู 90 ููููุง (ุญุชู 50 ุชุฐููุฑ)
- ุชูุธูุฑ ุนุฏุฏ ุงูุนุงุฌู ูุงููุชุฃุฎุฑ

---

## 11.5 ุชูุจููุงุช ุงูุฃุฏุงุก (PerformanceAlert)

ูุธุงู ุฅุดุนุงุฑุงุช ุฏุงุฎูู ููุญูุฏ:

### ุฃููุงุน ุงูุชูุจููุงุช

| ุงูููุน | ุงููุตู | ุงููุตุฏุฑ |
|-------|-------|--------|
| `badge_earned` | ุดุงุฑุฉ ููุชุณุจุฉ | HandleBadgePoints |
| `circular` | ุชุนููู ุฌุฏูุฏ | SendCircularJob |
| `late_warning` | ุชุญุฐูุฑ ุชุฃุฎุฑ | ุชููุงุฆู |
| `absence_warning` | ุชุญุฐูุฑ ุบูุงุจ | ุชููุงุฆู |
| `performance_review` | ูุฑุงุฌุนุฉ ุฃุฏุงุก | ูุฏูู |

### ูุณุชููุงุช ุงูุฎุทูุฑุฉ

| ุงููุณุชูู | ุงูููู | ุงูุงุณุชุฎุฏุงู |
|---------|-------|-----------|
| `info` | ุฃุฒุฑู | ูุนูููุงุช ุนุงูุฉ |
| `success` | ุฃุฎุถุฑ | ุฅูุฌุงุฒุงุช (ุดุงุฑุงุช) |
| `warning` | ุฃุตูุฑ | ุชุญุฐูุฑุงุช |
| `danger` | ุฃุญูุฑ | ุชูุจููุงุช ุญุฑุฌุฉ |

### ุฅุฌุฑุงุกุงุช ุงููุงุฌูุฉ

- ุชุนููู ูููุฑูุก (ูุฑุฏู ูุฌูุงุนู)
- **ุดุงุฑุฉ ุงูุชููู**: ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ

---

## 11.6 ุฅุนุฏุงุฏุงุช ุงููุธุงู (Settings)

### ูููุฐุฌ Singleton

```php
Setting::instance()  // ููุนูุฏ/ูููุดุฆ ุงูุตู ุงููุญูุฏ
// ูุฎุฒู ูุคูุชูุง ุณุงุนุฉ ูุงุญุฏุฉ
```

### ุงูุฅุนุฏุงุฏุงุช ุงููุชุงุญุฉ

| ุงููุฌููุนุฉ | ุงูุฅุนุฏุงุฏุงุช |
|----------|-----------|
| **ุงูุชุทุจูู** | `app_name_ar`, `app_name_en`, `logo`, `favicon`, `welcome_title`, `welcome_body` |
| **PWA** | `pwa_name`, `pwa_short_name`, `pwa_theme_color`, `pwa_background_color` |
| **ููุทู ุงูุนูู** | `loss_multiplier` (ูุถุงุนู ุงูุฎุณุงุฑุฉ)ุ `default_geofence_radius`ุ `default_grace_period`ุ `overtime_multiplier` |

### ุงูุชุนุฏูู

- **ุตูุญุฉ**: `GeneralSettingsPage`
- **ุงููุตูู**: ุงููุณุชูู 10 ููุท

---

> **ุงูุณุงุจู**: [ูุธุงู ุงูุชุญููุฒ](10-gamification-system.md) | **ุงูุชุงูู**: [ูุธุงู ุงููุฎุงุฎ ุงูููุณูุฉ](12-trap-system.md)
